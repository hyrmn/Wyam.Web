<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
        <meta name="description" content="Wyam is a simple to use, highly modular, and extremely configurable static content generator." />
        <meta name="keywords" content="static content generator,static site generator,static site,HTML,web development,.NET,C#,Razor,Markdown,YAML" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
        <link rel="icon" href="/favicon.ico" type="image/x-icon">
        <title>Wyam - Migrating to 0.12.x</title>
        <link href="/Content/bootstrap-less/bootstrap.css" rel="stylesheet" />
        <link href="/Content/adminlte/AdminLTE.css" rel="stylesheet" />
        <link href="/Content/adminlte/skins/wyam.css" rel="stylesheet" />
        <link href="/Content/prettify.css" rel="stylesheet">
        <link href="/Content/github.css" rel="stylesheet">
        <link href="https://cdn.rawgit.com/knsv/mermaid/0.5.8/dist/mermaid.css" rel="stylesheet">
        <link href="/Content/master.css" rel="stylesheet" />
        <link href='https://fonts.googleapis.com/css?family=Roboto:400,400italic,700,700italic' rel='stylesheet' type='text/css'>
        <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
        <script src="/Scripts/jQuery-2.1.4.min.js"></script>
        <script src="/Scripts/bootstrap.min.js"></script>        
        <script src="/Scripts/app.min.js"></script>         
        <script src="/Scripts/prettify.js"></script>   
        <script src="/Scripts/jquery.slimscroll.min.js"></script>
        <script src="https://cdn.rawgit.com/knsv/mermaid/0.5.8/dist/mermaid.min.js"></script>
        <!--[if lt IE 9]>
        <script src="/Scripts/html5shiv.min.js"></script>
        <script src="/Scripts/respond.min.js"></script>
        <![endif]-->  
    </head>

    <body class="hold-transition wyam layout-boxed  " onload="prettyPrint()">    
        <div class="top-banner"></div>
        <div class="wrapper">
            <!-- Header -->
            <header class="main-header">   
                     
                <a href="/" class="logo">
                    <!-- mini logo for sidebar mini 50x50 pixels -->
                    <span class="logo-mini"><img src="/Content/images/nav-logo.png"></span>
                    <!-- logo for regular state and mobile devices -->
                    <span class="logo-lg"><img src="/Content/images/nav-logo.png"></span>
                </a>   
                         
                <nav class="navbar navbar-static-top" role="navigation">
                    <!-- Sidebar toggle button-->
                        <a href="#" class="sidebar-toggle visible-xs-block" data-toggle="offcanvas" role="button">
                            <span class="sr-only">Toggle side menu</span>
                            <i class="fa fa-chevron-circle-right"></i>
                        </a>
                                        
                    <div class="navbar-header">
                        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse">
                            <span class="sr-only">Toggle side menu</span>
                            <i class="fa fa-chevron-circle-down"></i>
                        </button>
                    </div>
            
                    <!-- Collect the nav links, forms, and other content for toggling -->
                    <div class="collapse navbar-collapse pull-left" id="navbar-collapse">
                        <ul class="nav navbar-nav">                            
                                    <li><a href="/getting-started">Getting Started</a></li>
                                    <li><a href="/modules">Modules</a></li>
                                    <li><a href="/api">API</a></li>
                                    <li class="active"><a href="/knowledgebase">Knowledgebase</a></li>
                                    <li><a href="/community">Community</a></li>

                        </ul>       
                    </div>
                    <!-- /.navbar-collapse -->
                
                    <!-- Navbar Right Menu -->
                    
                </nav>
            </header>
            
            <!-- Left side column. contains the logo and sidebar -->
            <aside class="main-sidebar ">
                <section class="sidebar smaller">                    
                    
                    <!-- search form -->
                    
                    
                    <!-- sidebar menu: : style can be found in sidebar.less -->
                    <ul class="sidebar-menu">
                        
	
				<li>
				<a href="/knowledgebase/continuous-integration">
					Continuous Integration
				</a>
			</li>
			<li>
				<a href="/knowledgebase/custom_document_types">
					Custom Document Types
				</a>
			</li>
			<li>
				<a href="/knowledgebase/embedded-use">
					Embedded Use
				</a>
			</li>
			<li>
				<a href="/knowledgebase/executing-in-a-unit-test">
					Executing In A Unit Test
				</a>
			</li>
			<li>
				<a href="/knowledgebase/how-to-set-the-currentculture">
					How To Set The CurrentCulture
				</a>
			</li>
			<li>
				<a href="/knowledgebase/tools-package">
					How To Use The Tools Package
				</a>
			</li>
			<li class="active">
				<a href="/knowledgebase/migrating-to-0.12.x">
					Migrating to 0.12.x
				</a>
			</li>
			<li>
				<a href="/knowledgebase/module-inputs-vs-outputs">
					Module Inputs vs. Outputs
				</a>
			</li>
			<li>
				<a href="/knowledgebase/rss-and-atom-feeds">
					RSS and Atom Feeds
				</a>
			</li>
			<li>
				<a href="/knowledgebase/some-background">
					Some Background
				</a>
			</li>
			<li>
				<a href="/knowledgebase/static-site-resources">
					Static Site Resources
				</a>
			</li>
			<li>
				<a href="/knowledgebase/writing-a-module">
					Writing a Module
				</a>
			</li>



                    </ul>
                </section>                
            </aside>
            
            <!-- Content Wrapper. Contains page content -->
            <div class="content-wrapper">
                


	<section class="content-header">
		<h1>Migrating to 0.12.x</h1>
	</section>
	<section class="content">
		


<p>The 0.12.x series of releases is a chance to &quot;reset&quot; some things that worked well when this was just a smaller project but need to change as Wyam serves more use cases. These changes will set the project up for a number of new features in the 0.13.x releases such as recipes and themes.</p>
<h1><a name="0.12.1"></a>0.12.1</h1>
<hr />
<p>The major breaking change in 0.12.1 is that every module is no longer included with the core distribution. This was necessary because as the number of modules has increased, the distribution size has as well, and it was getting to the point that the core distribution was becoming larger than desired for simple use cases. You will now need to declare any non-core modules using preprocessor directives in your configuration file:</p>
<pre class="prettyprint"><code>#n -p Wyam.Modules.Markdown
</code></pre>
<p>Alternatively, you can download a meta-package that contains references to all official Wyam module packages:</p>
<pre class="prettyprint"><code>#n -p Wyam.Modules.All
</code></pre>
<h1><a name="0.12.0"></a>0.12.0</h1>
<hr />
<p>In general, the steps to migrate look like the following:</p>
<ul>
<li>Modify the paths used with <code>ReadFiles</code> and <code>CopyFiles</code> to use <a href="/getting-started/io#globbing">globbing patterns</a> and honor <a href="/getting-started/io#case-sensitivity">case sensitivity</a>.</li>
<li>Change uses of <code>IMetadata.Link()</code> to <code>IExecutionContext.GetLink()</code> in templates and helper methods.</li>
<li>Change uses of <code>PathHelper</code> to instance methods of <code>FilePath</code> and <code>DirectoryPath</code>.</li>
</ul>
<p>Here is a little more detail about the changes:</p>
<ul>
<li>All paths are now case sensitive (see <a href="/getting-started/io#case-sensitivity">case sensitivity</a> for a discussion of why).</li>
<li>Modules now use <a href="/getting-started/io#globbing">globbing patterns</a> instead of simple file search patterns.</li>
<li>Methods to manually specify search depth and apply conditions that globbing can cover (such as limiting to specific extensions) have generally been removed.</li>
<li>Path metadata set by modules such as <code>ReadFiles</code> is now typed as <code>FilePath</code> or <code>DirectoryPath</code>.
<ul>
<li>You can still easily get a <code>string</code> by using <code>IMetadata.String()</code> but direct casts to <code>string</code> (I.e., <code>(string)document[&quot;key&quot;]</code>) may fail.</li>
</ul>
</li>
<li><code>IDocument.Source</code> is now a <code>FilePath</code> and must be absolute (modules should use the static string <code>NormalizedPath.AbstractProvider</code> as the provider for a source path if the document was generated internally).</li>
<li><code>PathHelper</code> is no longer available, use instance methods of <code>FilePath</code> and <code>DirectoryPath</code> instead.</li>
<li><code>IMetadata.Link()</code> has been moved to <code>ExecutionContext.GetLink()</code> and link settings like host and root path can be globally controlled with <code>OutputSettings</code></li>
</ul>
<h2>Modules</h2>
<p>Several modules that interact with the file system have been updated. An attempt was made to either retain backwards compatibility or provide temporary legacy modules that would work the same way the old ones did. However, the differences between the native <code>System.IO</code> classes we had been using and the new multi-provider IO abstraction were just too great. Instead of spending lots of effort writing code specifically to support backwards compatibility, the decision was made to make a clean break and update the existing modules in place. The section below describes the most important changes and how to adapt your site.</p>
<h3>ReadFiles</h3>
<p>The <code>ReadFiles</code> constructor now accepts one or more <a href="/getting-started/io#globbing">globbing patterns</a>. This easily covers everything the old version used to, plus enables much more powerful file searching. For example, instead of using a pattern of &quot;*.md&quot; and <code>.FromAllDirectories()</code> you can just use the globbing pattern &quot;**/*.md&quot;. Because the globbing patterns cover recursion, the methods to manually specify depth have been removed. The method for limiting extensions has also been removed as that can be represented in the globbing patterns.</p>
<p>In addition, many situations that would have required a predicate with <code>.Where()</code> can now rely on globbing patterns. For example, <code>ReadFiles(&quot;*.cshtml&quot;).Where(x =&gt; System.IO.Path.GetFileName(x)[0] != '_')</code> can now be written as <code>ReadFiles(&quot;{!_,}*.cshtml&quot;)</code>. Because the globbing patterns work differently than the old style patterns, it's recommended that you read and understand them before migrating your modules.</p>
<p><code>ReadFiles.Where()</code> has been modified to pass an <code>IFile</code> instead of just a string path. If you need your predicate to operate on the path, just look at <code>IFile.Path</code>. This will allow more complex conditional reads, such as when the file was created.</p>
<h3>CopyFiles</h3>
<p>The changes to <code>CopyFiles</code> are similar to those for <code>ReadFiles</code>. The constructor now accepts one or more <a href="/getting-started/io#globbing">globbing patterns</a> and the methods to manually specify depth have been removed. The method for limiting extensions has also been removed as that can be represented in the globbing patterns. <code>CopyFiles.Where()</code> has been modified to pass an <code>IFile</code> instead of just a string path.</p>
<h3>Rss and Sitemap</h3>
<p>The link/location customizers are now <code>Func&lt;FilePath, FilePath&gt;</code> instead of a <code>Func&lt;string, string&gt;</code>.</p>


	</section>
                
            </div>
            
            
            <!-- Footer -->
            <footer class="main-footer">
            </footer>
            
            
        </div>
        <div class="wrapper bottom-wrapper">
            <footer class="bottom-footer"><small>Wyam is crafted by <a href="http://www.daveaglick.com">Dave Glick</a> and <a href="https://github.com/Wyamio/Wyam/graphs/contributors">other awesome contributors</a>. <a href="https://github.com/Wyamio/Wyam">Code on GitHub</a>. This site was entirely generated by Wyam. Check out <a href="https://github.com/Wyamio/Wyam.Web">the site code on GitHub</a>.</small></footer>
        </div>
        <div class="github-button">
            <a href="https://github.com/Wyamio/Wyam"><i class="fa fa-github"></i> GitHub</a>
        </div>
        <script>
            $(document).load(function() {
                mermaid.initialize();
            });
        </script>
        <script>
            ((window.gitter = {}).chat = {}).options = {
                room: 'wyamio/wyam'
            };
        </script>
        <script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async defer></script>
        <script>            
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');            
            ga('create', 'UA-54470483-4', 'auto');
            ga('send', 'pageview');
        </script>
    </body>
</html>